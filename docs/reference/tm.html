<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="tm performs a trimmed means analysis for data with a continuous outcome/response and a binary
treatment/exposure variable. Outcomes are sorted and trimmed per treatment group, and a linear
regression is fitted using lm."><title>Fitting Trimmed Mean Linear Models: — tm • tmsens</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Fitting Trimmed Mean Linear Models: — tm"><meta property="og:description" content="tm performs a trimmed means analysis for data with a continuous outcome/response and a binary
treatment/exposure variable. Outcomes are sorted and trimmed per treatment group, and a linear
regression is fitted using lm."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tmsens</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dea-hazewinkel/tmsens/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fitting Trimmed Mean Linear Models:</h1>
      <small class="dont-index">Source: <a href="https://github.com/dea-hazewinkel/tmsens/blob/HEAD/R/tmF.R" class="external-link"><code>R/tmF.R</code></a></small>
      <div class="d-none name"><code>tm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>tm</code> performs a trimmed means analysis for data with a continuous outcome/response and a binary
treatment/exposure variable. Outcomes are sorted and trimmed per treatment group, and a linear
regression is fitted using <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tm</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">GR</span>,</span>
<span>  trF <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  side <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LOW"</span>, <span class="st">"HIGH"</span><span class="op">)</span>,</span>
<span>  n_perm <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  adj_est <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">data</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>an object of class <code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></code>, specifying the model, of the form
<code>outcome ~ terms</code>, where <code>terms</code> must include the binary treatment variable, with additional
variables optional.</p></dd>


<dt>GR</dt>
<dd><p>a string denoting the name of the binary treatment variable. This function assumes the
lowest value to be the comparator/reference group</p></dd>


<dt>trF</dt>
<dd><p>a number between 0 and 1, specifying the trimming fraction: the proportion of the data that is trimmed away
for each treatment group. <code>trF</code> should be equal to or greater than the largest observed
dropout proportion. If left unspecified, a default trimming fraction of 0.5 is assumed.</p></dd>


<dt>side</dt>
<dd><p>specifies if higher value trimming (<code>"HIGH"</code>) or lower value trimming (<code>"LOW"</code>) should be performed.</p></dd>


<dt>n_perm</dt>
<dd><p>the number of permutations performed to obtain the p-value and 95% confidence intervals
for the estimates. Default is 1000.</p></dd>


<dt>adj_est</dt>
<dd><p>logical. If <code>TRUE</code> the adjusted trimmed means estimate is computed. The default is <code>FALSE</code>.</p></dd>


<dt>data</dt>
<dd><p>a data frame containing the variables in the model. <code>data</code> should contain at least the following:
a numeric outcome variable and a binary treatment variable (numeric, character or factor).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>tm</code> returns an object of class <code>tm</code>.
The function <code>summary</code> is used to obtain a summary of the results. The generic accessor function
<code>coefficients</code> extracts the regression coefficients with corresponding p-values and 95% confidence intervals.</p>


<p>An object of class "<code>tm</code>" is a list containing the following components:</p>
<dl><dt>call</dt>
<dd><p>the matched call</p></dd>

<dt>n</dt>
<dd><p>the number of observations per treatment group</p></dd>

<dt>dropout</dt>
<dd><p>the proportion of dropout per treatment group</p></dd>

<dt>trimfrac</dt>
<dd><p>the proportion of data that was trimmed away per treatment group</p></dd>

<dt>trimside</dt>
<dd><p>specifies if lower or higher value trimming was performed</p></dd>

<dt>n_after_trimming</dt>
<dd><p>the number of observations per treatment group after trimming</p></dd>

<dt>coefficients</dt>
<dd><p>an array of coefficients with corresponding p-values and 95% confidence intervals</p></dd>

<dt>Analysis_details</dt>
<dd><p>reiterates trimming fraction and side, and, for adjest=TRUE specifies if the adjustment was performed on the comparator or treatment group.</p></dd>

<dt>SD_outcome</dt>
<dd><p>an array of the standard deviation per treatment group, for the observed outcomes and for the trimmed outcomes</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The trimmed means estimate is subject to two assumptions: the strong MNAR assumption requires
that all dropouts (unobserved outcome values) are located in the fraction of the distribution
that is trimmed away; the location shift assumption requires the group variances of the full sample
to be equal. The adjusted trimmed means estimator relaxes the latter, but assumes normally
distributed outcomes. The adjustment is performed on the group with the smallest dropout proportion.</p>
<p>The p-value and 95% confidence intervals for the trimmed means estimate and the adjusted trimmed means
estimate are obtained in a permutation approach.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123456</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">test_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">500</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">500</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1</span>, <span class="fl">1.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2</span>, <span class="fl">0.4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">test_dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TR"</span>, <span class="st">"Y"</span>, <span class="st">"U"</span>, <span class="st">"U2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">test_dat</span><span class="op">$</span><span class="va">Y</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">200</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="co"># Note that we usually recommend setting n_perm to a larger value, e.g., 1000</span></span></span>
<span class="r-in"><span><span class="va">tm_obj</span> <span class="op">&lt;-</span> <span class="fu">tm</span><span class="op">(</span>formula<span class="op">=</span> <span class="va">Y</span> <span class="op">~</span> <span class="va">TR</span> <span class="op">+</span> <span class="va">U</span> <span class="op">+</span> <span class="va">U2</span>,</span></span>
<span class="r-in"><span>             GR <span class="op">=</span> <span class="st">"TR"</span>, trF <span class="op">=</span> <span class="fl">0.5</span>, side <span class="op">=</span> <span class="st">"LOW"</span>,</span></span>
<span class="r-in"><span>             n_perm <span class="op">=</span> <span class="fl">100</span>, adj_est <span class="op">=</span> <span class="cn">TRUE</span>, data <span class="op">=</span> <span class="va">test_dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tm_obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tm(formula = Y ~ TR + U + U2, GR = "TR", trF = 0.5, side = "LOW", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     n_perm = 100, adj_est = TRUE, data = test_dat)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Estimate      Pval 95% CI LO 95% CI HI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TR     1.354308  0.000000  1.166162     1.542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> U     -0.071352  0.960000 -0.163494     0.021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> U2     0.055791  0.050000 -0.009835     0.121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TRadj  0.969812  0.000000  0.850012     1.090</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tm_obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tm(formula = Y ~ TR + U + U2, GR = "TR", trF = 0.5, side = "LOW", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     n_perm = 100, adj_est = TRUE, data = test_dat)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis details:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Treatment (1) group rescaled for adjusted TM estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Estimate      Pval 95% CI LO 95% CI HI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TR     1.354308  0.000000  1.166162     1.542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> U     -0.071352  0.960000 -0.163494     0.021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> U2     0.055791  0.050000 -0.009835     0.121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TRadj  0.969812  0.000000  0.850012     1.090</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dropout:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample size after trimming:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Trimming fraction: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50% lower value trimming</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Audinga-Dea Hazewinkel, Tom Palmer, Kate Tilling, Kaitlin Wade, Jack Bowden.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

